# Session Log
- Darkened medal text and added a soft highlight glow for better contrast.
- Added embossed text shadow for medal rank text to improve contrast.
- Styled top three ranks as medal chips with metallic gradients.
- Added a percent sign for Headshot % values in the details panel.
- Added gold/silver/bronze glow styles for the top three rows in the details panel.
- Reduced detail panel value weight to regular (no bold).
- Replaced stair-step label offsets with horizontal jitter and light collision nudging for bar value labels.
- Added collision avoidance on bar value labels per column to reduce remaining overlaps after alternating offsets.
- Switched bar value label staggering to alternate offsets instead of stair-step stacking.
- Rounded Headshot % values to whole numbers in the chart and details panel.
- Adjusted bar value label placement to enforce a minimum vertical gap per column.
- Staggered bar value labels per column to prevent overlap across players.
- Refresh now re-fetches Steam profiles when a player color is missing so Original mode continues to use avatar-derived colors.
- Removed an invalid stat-header render call that could throw after refresh and force missing fallback cards.
- Disabled HTTP caching so the UI always loads the latest `index.html` changes.
- Aligned missing card flags with the server-provided missing list (label/SteamID/URL match) to prevent false positives.
- Normalized missing flags client-side so cards only show missing when no stats are present.
- Fixed player card missing labels to only render when `missing === true`.
- Fixed player “Missing on server” flags to track scrape success by index instead of label keys.
- Restored Moose page load to networkidle and added robust server dropdown open/selection fallback with list index targeting (Monthly=1, Biweekly=7).
- Restored the original MudSelect server selection flow in the scraper.
- Reverted server selection to simple dropdown click + list item text match with index fallback; restored broad search input selector.
- Targeted the visible search input and ensured table headers are present before mapping columns.
- Added dropdown visibility waits and keyboard fallback to open the server selector reliably.
- Added detailed server selection status steps and a keyboard fallback when the dropdown popover fails.
- Added waits for table rows after server selection and search queries to avoid empty results.
- Hardened server dropdown click targeting and added timeouts/errors for missing server list rendering.
- Switched Moose page load to domcontentloaded and skipped avatar color sampling during refresh for speed.
- Skipped Steam profile fetches when stored data is complete and added targeted table row waits instead of fixed delays.
- Removed fixed 1.2s scrape delays to speed up Moose lookups.
- Fixed scrape status updates so the loading overlay always receives messages even without a sidebar element.
- Fixed loading overlay layout to show the scrape status on a second line consistently.
- Added a second line in the loading overlay for scrape status updates.
- Moved scrape status into the loading overlay and removed refresh timeouts.
- Added scrape status reporting in the UI with server-side progress tracking.
- Added 30s refresh timeouts on server and client to avoid infinite loading.
- Tightened Moose search input selection to target table search and clear between queries.
- Moose lookup now searches by display name first, then falls back to Steam64 IDs.
- Relaxed SteamID search to accept the first filtered row and only use valid profile URLs for Steam hydration.
- Expanded player edit panels now push below the card content instead of overlapping it.
- Aligned title row so the server selector sits on the same top line as the page title.
- Moved server select into the title row and tuned stat panel sizing, ranking colors, and typography.
- Increased detail panel typography, hover glow on stat headers, and deferred default stat highlight until user selection.
- Added hover glow, ranked stat details sorting, and header highlighting for selected stat.
- Added stat header buttons, vertical detail list, label headroom tweaks, and higher-contrast server select styling.
- Added contrast color mode toggle, stat drill-down panel, and chart label/interaction tweaks (top headers, staggered values).
- Added color mode toggle (Original vs Contrast) with vibrant unique player colors derived from avatar hues.
- Restored avatar-based colors and tightened chart sizing to fit without scrollbars.
- Prefer numeric Steam64 IDs from stored players when scraping to avoid name-only search failures.
- Player lookup now retries with resolved Steam64 when name search fails, using numeric IDs first.
- Steam profile hydration now falls back to the Steam64 profile URL to populate avatars reliably.
- When only SteamID64 is provided, auto-build the Steam profile URL to hydrate avatars on refresh.
- Added an explicit expand toggle button on player cards to avoid opening the Steam link when editing.
- Added editable player cards: click to expand, edit Steam URL/Steam64 ID, and save back to `players.json`.
- Restored name-first search in Moose scraper, then fallback to SteamID and numeric URL ID.
- SteamID64 resolution now uses steamid.io lookup for vanity URLs with Steam XML as fallback.
- Auto-resolve non-numeric SteamIDs during player hydration so refresh uses 17-digit IDs.
- Limited player lookup to SteamID (numeric) search on Moose stats; removed name-only fallback.
- Tuned chart dimensions: wider panel, wider chart min width, and capped height for better 10-player visibility.
- Hydrate players before refresh/data so newly added avatars/names populate in the chart response.
- Widened the dashboard panel and added horizontal chart scrolling with a dynamic min width for 10-player comparisons.
- Used stored display names and avatars when Steam profile fetch falls back to IDs/logos.
- Increased max players to 10.
- Forced server selection to use fixed list indices (Monthly=1, Biweekly=7) per UI order.
- Added server dropdown index fallbacks (1-based) for Monthly and Biweekly selection.
- Showed server debug line even when refresh fails (uses the selected UI server as fallback).
- Added server selection debug info to the UI response and loosened player row matching to include text matches.
- Added server selection verification/retry and list logging when the desired server isn't found.
- Hardened server dropdown selection to match server names instead of relying on list order.
- Hydrated saved players with Steam display names and avatars so the UI can show them even when refresh fails.
- Allowed deleting all players while still requiring at least two players for comparisons.
- Fixed player removal to accept missing IDs by falling back to Steam URL, and treat not-found deletes as no-ops.
- Added add-player SteamID64 resolution plus UI fallback rendering when refresh fails, and scraper now skips missing players while reporting them.
- Added a User-Agent to SteamID64 XML resolution to improve searchKey matching for vanity Steam URLs.
- Added server selection (Monthly/Biweekly) to the dashboard UI, API, and `scripts/moose_compare.js`, with UI selection persisted in localStorage.
- Established workspace docs (`NOTES.md`, `TODO.md`, `SCRIPTS.md`) and created `scripts/` placeholder for future helpers.
- Documented lab collaboration rules in `AGENTS.md` to guide contributions.
- Updated `AGENTS.md` to codify auto-logging and indexing when scripts or important files change.
- Added `scripts/hello.ps1` test script that prints a green greeting and indexed it in `SCRIPTS.md`.
- Verified `scripts/hello.ps1` runs successfully via PowerShell.
- Initialized npm project via `npm init -y`.
- Attempted `npm install playwright`; failed with EPERM chmod on `/mnt/c/.../node_modules/playwright/cli.js` (likely NTFS/WSL permissions). Next step: install on an ext4 path or remount with metadata/adjust perms.
- Added `scripts/moose_compare.js` Playwright script to scrape Moose stats and generate a Chart.js comparison; indexed in `SCRIPTS.md`.
- Playwright installed via Windows PowerShell; ready to rerun installs or execute `scripts/moose_compare.js` from PowerShell.
- Tried running `node scripts/moose_compare.js` from WSL; command timed out after 10s. Likely needs a longer timeout or to run directly in Windows PowerShell with network access.
- Ran `node .\scripts\moose_compare.js` via Windows PowerShell; failed at server selection due to Playwright strict mode matching two “Select Server” elements (legend + label). Needs a more specific selector.
- Updated `scripts/moose_compare.js` to click the server dropdown button and select the option by role to avoid strict-mode conflicts.
- Refined `selectServer` to click the MudSelect input (`input.mud-select-input`) and choose the option from `.mud-popover .mud-list-item` by text.
- Attempted to run the updated script via Windows PowerShell; command hit a 10s timeout during server selection. Needs a longer timeout or to run directly from Windows with more time.
- Tweaked `selectServer` to wait for the popover option to be visible before clicking, addressing missed clicks in the server list.
- Adjusted `selectServer` to click the option by text within the Mud popover (`US Monthly (Premium)`), matching the observed markup.
- Ran with a 60s PowerShell timeout; server option still not found (waiting for `.mud-popover` text match “us monthly premium”). Need to inspect the dropdown DOM after click.
- Updated `selectServer` to wait for `.mud-popover` and click `.mud-list-item` with exact text; switched to the proper cased server name “US Monthly (Premium)”.
- Broadened search input locator and added extra wait after server switch to stabilize table filtering.
- Expanded search input selector to include MudBlazor input classes so player search fields are found reliably.
- Ran `scripts/moose_compare.js` via PowerShell (10s timeout): fetched Timmy Twinkle Toes and DAVE stats successfully and wrote `moose_stats_chart.html`.
- Enhanced `scripts/moose_compare.js` with Steam profile avatars, per-player color theming, and a Steam-styled chart page; updated SCRIPTS.md entry.
- Tested updated script via PowerShell (10s timeout); stats fetched and `moose_stats_chart.html` generated successfully with Steam-themed output.
- Hardened Steam avatar fetch to use user-agent and alternate selectors (avatar div and og:image) to reduce missing profile images.
- Confirmed Steam avatars are now fetched correctly when running via PowerShell.
- Copied project to ext4 path `~/dev/ChatGPT`, installed Playwright there, and downloaded Chromium via `npx playwright install chromium`.
- Playwright on WSL reports missing host deps (libnspr4, libnss3, libasound2t64); install with `sudo npx playwright install-deps` or apt equivalents if running browsers in WSL.
- WSL ext4 copy flattened and Playwright host deps installed; script runs headful and writes `/home/dubz/dev/ChatGPT/moose_stats_chart.html`.
- Updated `moose_compare.js` with wider layout, responsive chart wrapper, and Chart.js zoom/pan plugin for intuitive resizing/zooming; updated `SCRIPTS.md` entry.
- Added dominant avatar color sampling per player (Steam avatars) to theme bars and player accents automatically; documented in SCRIPTS.md.
- Ran `scripts/moose_compare.js` in WSL ext4 copy: stats fetched, chart generated at `/home/dubz/dev/ChatGPT/moose_stats_chart.html` with avatar-driven theming and zoom.
- Synced Moose player names from Steam display names (fetched via profile URLs) and kept avatar-color theming in `moose_compare.js`; updated SCRIPTS.md.
- Fixed tooltip template literal bug and reran script successfully; chart generated at `/home/dubz/dev/ChatGPT/moose_stats_chart.html`.
- Added logging of Steam display names and mirrored chart output to Windows path `/mnt/c/Users/Dubz/dev/ChatGPT/moose_stats_chart.html` for host viewing.
- Updated player search keys to use Steam profile IDs (VeryScary: 76561198062944336, Dave: 76561198880952190) to match Moose stats identifiers.
- Mapped table columns dynamically, added headshot percentage extraction (with derived fallback), and verified latest run writes updated data to both WSL and Windows chart outputs.
- Updated chart title to server name “Rusty Moose |US Monthly| (Premium)”.
- Added Express/Playwright server (`server.js`) with API/UI for add/remove/refresh players (min 2, max 5), serving `index.html` dashboard with interactive controls.
- Tightened scraper to require SteamID/searchKey anchor matches (no name fallbacks) to avoid grabbing the wrong player rows.
- UI: aligned refresh/+ buttons inline with player cards, hid SteamID on cards, improved tooltip hiding, alternating chart bands, increased top padding/grace to prevent label clipping, and restored avatar-based colors from scraper.
- Synced ext4 copy to `C:\Users\Dubz\dev\ChatGPT` and decided to edit directly in the Windows directory to avoid repeated resyncs.
- UI: reduced header-to-chart gap slightly on the stats page for a tighter layout.
- UI: added a small bottom margin to the (hidden) subtitle to provide a bit more vertical spacing between the header and player cards.
- UI: increased the title’s bottom margin to push the player cards row down slightly.
- UI: bumped the title’s bottom margin to 20px to give more space above the player cards row.
- UI: adjusted chart top padding (labelPaddingTop currently 20) to tune the gap between player cards and the chart area.
- Headshot % now always derived from Headshots and Shots Hit (avoids plotting raw headshot counts twice).
- Player cards now link to the Steam profile (avatar and name wrapped in a hyperlink).
- Chart: X-axis labels restyled to white with slightly larger font (13px, Segoe UI, semi-bold).
- Added a loading overlay (with status text) during refresh/add/remove actions on the stats page.
- Created Start Menu shortcut “Rusty Moose Stats” that opens PowerShell, starts the server, and launches http://localhost:3000.
- Removed temporary `create_shortcut.ps1` helper script.
- Added `HOW_TO_EDIT_THIS_PROJECT.md` (renamed from DEV_WORKFLOW) with quick-start instructions for launching and editing the project.

## Session Summary – 2025-11-17
- Focus: Polish UI spacing and bar labels on the Rusty Moose stats page; header layout (refresh left, cards span middle, + right); ensure bar value labels stay inside chart.
- Files touched: `index.html` (header/chart HTML/CSS, player card layout, chart height), `scripts/moose_scraper.js` (SteamID resolution/color sampling earlier), server restarts.
- Current state: Header row uses `.stats-header` with buttons at edges and cards spanning via grid; chart container is 440px tall with minimal gap; bar value labels now clamped above bars (barValuePlugin) to avoid clipping.
- Pending checks: Verify tooltips alignment (unchanged), confirm bar labels stay clear on tallest bars across different player counts, and confirm player card grid spans correctly for 2–5 players.
- Notes: Tooltips/zoom untouched; chart layout padding unchanged; server running via `node server.js` in `/home/dubz/dev/ChatGPT` with Playwright browsers installed (`PLAYWRIGHT_BROWSERS_PATH=0`).
- Switched chart to logarithmic y-scale with zero-safety and value-preserving tooltips to keep small metrics visible alongside large counts.

# Ideas
- Consider first automation target (Windows setup helper, WSL bootstrap, Rust template maker, or a Minecraft mod utility).

# Bugs / Issues
- None logged yet.

# Decisions
- Track ongoing work in `TODO.md` and log future script details in `SCRIPTS.md`.
- Keep helper scripts under `scripts/` and record changes here after updates.
